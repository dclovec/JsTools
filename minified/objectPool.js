!function(e,n){"function"==typeof define&&define.amd?define(function(){return n()}):"object"==typeof exports?module.exports=n:e.objectPool=n()}(this,function(){function e(){!!window&&n(window),o=[],!u&&(u=50),l=r=0,f=[],i=[]}function n(e){var n,o;n=e.onbeforeunload,e.onbeforeunload=n?function(){n(),e=e.onbeforeunload=o=n=null,t()}:function(){e=e.onbeforeunload=o=n=null,t()}}function t(){delete c.getNew,delete c.setPageCapacity,delete c.getPool,delete c.collectGabage,c=o=u=l=r=f=i=null}var o,u,l,r,f,i,c;return c={getNew:function(){return e(),c["new"]=function(){var e,n,t;if(r>0)n=i.shift(),r--,f.push(n),l++,t=o[n];else{if(u===r+l)return console.error("对象池达到最大容量。"),null;o[n=o.length]=t={},f.push(n),l++}return e={get:function(e){return t[e]||null},set:function(n,o){return!!n&&(t[n]=o),e},collect:function(){e=null;for(var o in t)delete t[o];return i.push(n),r++,f.splice(f.indexOf(n),1),l--,c}}},this["new"]()},setCapacity:function(e){return"number"==typeof e&&e>0&&(u=~~e),c},collectGabage:t}});